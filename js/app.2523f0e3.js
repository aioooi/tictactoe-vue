(function(e){function t(t){for(var r,s,o=t[0],l=t[1],u=t[2],f=0,h=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&h.push(a[s][0]),a[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);c&&c(t);while(h.length)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/tictactoe-vue/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0970":function(e,t,n){},4170:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"EMPTY",(function(){return p})),n.d(r,"PLAYER",(function(){return v})),n.d(r,"COMPUTER",(function(){return m})),n.d(r,"Game",(function(){return y}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Let's Play: Tic Tac Toe")]),n("h2",[e._v("(implemented using Vue.js)")]),n("div",{attrs:{id:"game"}},[n("Game",{attrs:{"player-begins":!0,delay:345}})],1)])},s=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"board"},e._l(9,(function(t){return n("div",{key:t,staticClass:"square",class:[e.state[Math.floor((t-1)/3)][(t-1)%3]!==e.ttt.EMPTY?"played":"",1===e.finalState[Math.floor((t-1)/3)][(t-1)%3]?"highlight-winning-line":""],on:{click:function(){return e.move(Math.floor((t-1)/3),(t-1)%3)}}},[n("div",{staticClass:"tag"},[e.state[Math.floor((t-1)/3)][(t-1)%3]===e.ttt.PLAYER?n("span",[e._v("྾")]):e._e(),e.state[Math.floor((t-1)/3)][(t-1)%3]===e.ttt.COMPUTER?n("span",[e._v("☯")]):e._e()])])})),0),n("Scoreboard",{attrs:{stats:this.stats}}),n("InputRadio",{attrs:{label:this.levels.map((function(e){return e.label}))},on:{select:e.levelChanged}})],1)},l=[],u=(n("4160"),n("a9e3"),n("d3b7"),n("159b"),n("2909")),c=(n("96cf"),n("1da1")),f=(n("99af"),n("0481"),n("d81d"),n("13d5"),n("4069"),n("53ca")),h=n("d4ec"),d=n("bee2"),p=0,v=1,m=-1,g=100,y=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(h["a"])(this,e),this.handicap=0<=t&&t<g?t:10,this.turn=n?v:m,this.state=[[p,p,p],[p,p,p],[p,p,p]]}return Object(d["a"])(e,[{key:"playerMove",value:function(e,t){if(this.turn!==v)throw Error("it's not your turn!");if(this.state[e][t]!==p)throw Error("square not empty!");return this.state[e][t]=v,console.log("player move done"),this.turn=m,this.gameFinished}},{key:"makeMove",value:function(){var e=this;if(this.turn!==m)throw Error("it's not my turn!");if(console.log("computer moves"),this._randInt(g)<this.handicap)console.log("you are lucky, I will just play a random square ;)"),this._randomMove();else{var t=[function(){return e._win()},function(){return e._avoidDefeat()},function(){return e._matchball()},function(){return e._center()},function(){return e._oppositeCorner()},function(){return e._emptyCorner()},function(){return e._randomMove()}];while(t.length)if(t.shift()())break}return this.turn=v,this.gameFinished}},{key:"_win",value:function(){return this._fillTriplet(2*m,"win")}},{key:"_avoidDefeat",value:function(){return this._fillTriplet(2*v,"avoid defeat")}},{key:"_fillTriplet",value:function(e,t){var n=this,r=this._checkTriplet(e);if(r.length){var a=r[this._randInt(r.length)];if(0<=a&&a<3){var i=this._where(this.state[a],p)[0];this.state[a][i]=m}else if(3<=a&&a<6){var s=a-3;console.log([0,1,2].map((function(e){return n.state[e][s]})));var o=this._where([0,1,2].map((function(e){return n.state[e][s]})),p)[0];this.state[o][s]=m}else if(6===a){var l=this.state.flat(),u=this._where([0,4,8].map((function(e){return l[e]})),p)[0];this.state[u][u]=m}else{var c=this.state.flat(),f=this._where([6,4,2].map((function(e){return c[e]})),p)[0];this.state[2-f][f]=m}return console.log(t),!0}return!1}},{key:"_matchball",value:function(){var e=this,t=function(e,t){return e+t},n=this._where(this.state.map((function(e){return e.reduce(t)})),m);this._shuffle(n);for(var r=0;r<n.length;r++){var a=n[r],i=this._where(this.state[a],p);if(i.length){console.log("create matchball: find empty square in row");var s=i[this._randInt(i.length)];return this.state[a][s]=m,!0}}var o=this._where([0,1,2].map((function(n){return[0,1,2].map((function(t){return e.state[t][n]})).reduce(t)})),m);this._shuffle(o);for(var l=function(t){var n=o[t],r=e._where([0,1,2].map((function(t){return e.state[t][n]})),p);if(r.length){console.log("create matchball: find empty square in column");var a=r[e._randInt(r.length)];return e.state[a][n]=m,{v:!0}}},u=0;u<o.length;u++){var c=l(u);if("object"===Object(f["a"])(c))return c.v}return!1}},{key:"_center",value:function(){return this.state[1][1]===p&&(console.log("play center"),this.state[1][1]=m,!0)}},{key:"_oppositeCorner",value:function(){var e=this.state.flat();return e[0]+e[8]===v?(console.log("play opposite corner"),this.state[0][0]===p?this.state[0][0]=m:this.state[2][2]=m,!0):e[2]+e[6]===v&&(console.log("play opposite corner"),this.state[0][2]===p?this.state[0][2]=m:this.state[2][0]=m,!0)}},{key:"_emptyCorner",value:function(){var e=this,t=[[0,0],[0,2],[2,0],[2,2]],n=this._where([0,2,6,8].map((function(t){return e.state.flat()[t]})),p);if(n.length){console.log("play empty corner");var r=this._randInt(n.length);return this.state[t[n[r]][0]][t[n[r]][1]]=m,!0}return!1}},{key:"_randomMove",value:function(){var e=this._where(this.state.flat(),p);if(e.length){console.log("play random square");var t=e[this._randInt(e.length)];return this.state[Math.floor(t/3)][t%3]=m,!0}return!1}},{key:"_randInt",value:function(e){return Math.floor(.99999*Math.random()*e)}},{key:"_where",value:function(e,t){var n=[];return e.forEach((function(e,r){e===t&&n.push(r)})),n}},{key:"_shuffle",value:function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}},{key:"_checkTriplet",value:function(e){var t=this,n=function(e,t){return e+t},r=this.state.map((function(e){return e.reduce(n)})),a=[0,1,2].map((function(e){return[0,1,2].map((function(n){return t.state[n][e]})).reduce(n)})),i=this.state.flat(),s=[0,4,8].map((function(e){return i[e]})).reduce(n),o=[6,4,2].map((function(e){return i[e]})).reduce(n);return this._where(r.concat(a).concat([s]).concat([o]),e)}},{key:"winner",get:function(){return this._winner}},{key:"winningLine",get:function(){return this._winningLine}},{key:"gameFinished",get:function(){var e=[this._checkTriplet(3*m),this._checkTriplet(3*v),0===this._where(this.state.flat(),p).length],t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];return e[0].length?(console.log("computer wins"),this._winner=m,this._winningLine=t[e[0][0]],!0):e[1].length?(console.log("player wins"),this._winner=v,this._winningLine=t[e[1][0]],!0):!(!e[2]||e[0].length||e[1].length)&&(console.log("that's a draw"),this._winner=p,!0)}}]),e}(),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid"},[n("ScoreboardCell",{attrs:{label:e.playerName,value:e.stats.player,edit:e.edit}}),n("ScoreboardCell",{attrs:{label:"Draw",value:e.stats.draw}}),n("ScoreboardCell",{attrs:{label:"Computer",value:e.stats.computer}})],1)},_=[],w=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"scale-animation",mode:"out-in"}},[n("div",{key:e.value},[e.edit?n("Input",{attrs:{value:e.label}}):n("div",{staticClass:"cell"},[e._v(e._s(e.label))]),n("div",{staticClass:"cell"},[e._v(e._s(e.value))])],1)])}),k=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.handleInput(t)}}},[e.disabled?n("div",[n("input",{attrs:{type:"text",disabled:""},domProps:{value:e.content}})]):n("div",{staticStyle:{position:"relative"}},[e.focus?e._e():n("label",[e._v("✎")]),n("input",{ref:"_input",attrs:{type:"text"},domProps:{value:e.content},on:{blur:e.handleInput,focus:e.hidePencil}})]),n("input",{attrs:{type:"submit"}})])},M=[],j=new a["a"],C=j,x={name:"Input",props:{value:{type:String,default:""},editOnlyOnce:{type:Boolean,default:!0}},data:function(){return{disabled:!1,focus:!1,content:this.value}},methods:{hasFocus:function(){return this.focus},handleInput:function(){this.content=this.$refs._input.value,this.editOnlyOnce&&(this.disabled=!0),C.$emit("playerNameChanged",this.content)},hidePencil:function(){this.focus=!0}}},S=x,I=(n("7faf"),n("2877")),P=Object(I["a"])(S,O,M,!1,null,"6a6af68a",null),T=P.exports,E={name:"ScoreboardCell",components:{Input:T},props:{label:{type:String,default:"Label"},value:{Type:Number,default:0},edit:{type:Boolean,default:!1}},data:function(){return{disabled:!0}},created:function(){this.disabled=!this.edit}},R=E,L=(n("7728"),Object(I["a"])(R,w,k,!1,null,"e28cfbaa",null)),$=L.exports,B={name:"Scoreboard",components:{ScoreboardCell:$},props:{stats:{computer:0,draw:0,player:0},name:{type:String,default:"Player"}},data:function(){return{playerName:this.name,edit:!0}},methods:{playerNameChanged:function(e){console.log('name changed: "'.concat(e,'"')),this.playerName=e,this.edit=!1}},mounted:function(){var e=this;C.$on("playerNameChanged",(function(t){return e.playerNameChanged(t)}))}},N=B,A=(n("d930"),Object(I["a"])(N,b,_,!1,null,"06a4e00d",null)),D=A.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid",style:{gridTemplateColumns:"repeat("+this.labels.length+", 1fr)"}},e._l(e.labels,(function(t){return n("div",{key:t.id,staticClass:"radioBtn"},[n("label",[e._v(e._s(t.label))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedId,expression:"selectedId"}],attrs:{type:"radio"},domProps:{value:t.id,checked:e._q(e.selectedId,t.id)},on:{change:[function(n){e.selectedId=t.id},e.select]}})])})),0)},q=[],F={name:"InputRadio",props:{label:{type:Array}},data:function(){return{selectedId:Math.floor(this.label.length/2),labels:this.label.map((function(e,t){return{id:t,label:e}}))}},methods:{select:function(){this.$emit("select",this.selectedId)}},created:function(){this.select()}},Y=F,J=(n("8780"),Object(I["a"])(Y,G,q,!1,null,"4ee9f9f9",null)),U=J.exports,V={name:"Game",props:{playerBegins:{type:Boolean,default:!0},delay:{type:Number,default:300}},components:{Scoreboard:D,InputRadio:U},data:function(){return{ttt:r,currentLevel:2,game:"",state:[[0,0,0],[0,0,0],[0,0,0]],finalState:[[0,0,0],[0,0,0],[0,0,0]],locked:!1,playerBeginsAfterDraw:!0,stats:{computer:0,draw:0,player:0},levels:[{label:"trivial",handicap:90},{label:"easy",handicap:65},{label:"medium",handicap:48},{label:"hard",handicap:24},{label:"impossible",handicap:5}]}},methods:{sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))},newGame:function(){var e=arguments,t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=!(e.length>0&&void 0!==e[0])||e[0],t.game=new y(t.levels[t.currentLevel].handicap,r),t.state=Object(u["a"])(t.game.state),t.finalState=[[0,0,0],[0,0,0],[0,0,0]],r){n.next=9;break}return t.locked=!0,n.next=8,t.sleep(50);case 8:t.game.makeMove();case 9:t.state=Object(u["a"])(t.game.state),t.locked=!1;case 11:case"end":return n.stop()}}),n)})))()},resetStats:function(){this.stats={computer:0,draw:0,player:0}},processResults:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=!0,e.game.winner===m?e.stats.computer+=1:e.game.winner===v?(e.stats.player+=1,n=!1):(e.stats.draw+=1,n=e.playerBeginsAfterDraw,e.playerBeginsAfterDraw=!e.playerBeginsAfterDraw),e.finalState=[[0,0,0],[0,0,0],[0,0,0]],e.game.winner!==p&&(r=e.game._winningLine,r.forEach((function(t){e.finalState[Math.floor(t/3)][t%3]=1}))),t.next=6,e.sleep(1200);case 6:e.newGame(n);case 7:case"end":return t.stop()}}),t)})))()},move:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.locked){r.next=20;break}if(n.locked=!0,r.prev=2,a=n.game.playerMove(e,t),n.state=Object(u["a"])(n.game.state),!a){r.next=9;break}n.processResults(),r.next=14;break;case 9:return r.next=11,n.sleep(Math.floor((.6+.4*Math.random())*n.delay));case 11:a=n.game.makeMove(),n.state=Object(u["a"])(n.game.state),a?n.processResults():n.locked=!1;case 14:r.next=20;break;case 16:r.prev=16,r.t0=r["catch"](2),console.error(r.t0),n.locked=!1;case 20:case"end":return r.stop()}}),r,null,[[2,16]])})))()},levelChanged:function(e){console.log("new level: ".concat(this.levels[e].label)),this.currentLevel=e,this.resetStats(),this.newGame()}},created:function(){this.newGame(this.playerBegins)}},z=V,H=(n("795f"),Object(I["a"])(z,o,l,!1,null,"e51917b6",null)),K=H.exports,Q={name:"App",components:{Game:K}},W=Q,X=(n("e3d0"),Object(I["a"])(W,i,s,!1,null,"e8e5190e",null)),Z=X.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(Z)}}).$mount("#app")},5715:function(e,t,n){},7728:function(e,t,n){"use strict";var r=n("df39"),a=n.n(r);a.a},"795f":function(e,t,n){"use strict";var r=n("0970"),a=n.n(r);a.a},"7faf":function(e,t,n){"use strict";var r=n("d90e"),a=n.n(r);a.a},8780:function(e,t,n){"use strict";var r=n("5715"),a=n.n(r);a.a},aded:function(e,t,n){},d90e:function(e,t,n){},d930:function(e,t,n){"use strict";var r=n("4170"),a=n.n(r);a.a},df39:function(e,t,n){},e3d0:function(e,t,n){"use strict";var r=n("aded"),a=n.n(r);a.a}});
//# sourceMappingURL=app.2523f0e3.js.map